import math

WIDTH, HEIGHT = 1200, 900

GRAVITY = 0.25
FRICTION = 1.05
WIND = 0

# ---------------- FONT (5x5 CAPS) ----------------

FONT = {
    "A": [" 111 ", "1   1", "11111", "1   1", "1   1"],
    "B": ["1111 ", "1   1", "1111 ", "1   1", "1111 "],
    "C": [" 1111", "1    ", "1    ", "1    ", " 1111"],
    "D": ["1111 ", "1   1", "1   1", "1   1", "1111 "],
    "E": ["11111", "1    ", "1111 ", "1    ", "11111"],
    "F": ["11111", "1    ", "1111 ", "1    ", "1    "],
    "G": [" 1111", "1    ", "1 111", "1   1", " 1111"],
    "H": ["1   1", "1   1", "11111", "1   1", "1   1"],
    "I": ["111", " 1 ", " 1 ", " 1 ", "111"],
    "J": ["  111", "   1 ", "   1 ", "1  1 ", " 11  "],
    "K": ["1   1", "1  1 ", "111  ", "1  1 ", "1   1"],
    "L": ["1    ", "1    ", "1    ", "1    ", "11111"],
    "M": ["1   1", "11 11", "1 1 1", "1   1", "1   1"],
    "N": ["1   1", "11  1", "1 1 1", "1  11", "1   1"],
    "O": [" 111 ", "1   1", "1   1", "1   1", " 111 "],
    "P": ["1111 ", "1   1", "1111 ", "1    ", "1    "],
    "Q": [" 111 ", "1   1", "1   1", "1  11", " 1111"],
    "R": ["1111 ", "1   1", "1111 ", "1  1 ", "1   1"],
    "S": [" 1111", "1    ", " 111 ", "    1", "1111 "],
    "T": ["11111", "  1  ", "  1  ", "  1  ", "  1  "],
    "U": ["1   1", "1   1", "1   1", "1   1", " 111 "],
    "V": ["1   1", "1   1", "1   1", " 1 1 ", "  1  "],
    "W": ["1   1", "1   1", "1 1 1", "11 11", "1   1"],
    "X": ["1   1", " 1 1 ", "  1  ", " 1 1 ", "1   1"],
    "Y": ["1   1", " 1 1 ", "  1  ", "  1  ", "  1  "],
    "Z": ["11111", "   1 ", "  1  ", " 1   ", "11111"],
    "0": [" 111 ", "1  11", "1 1 1", "11  1", " 111 "],
    "1": ["  1  ", " 11  ", "  1  ", "  1  ", "11111"],
    "2": [" 111 ", "1   1", "  11 ", " 1   ", "11111"],
    "3": ["1111 ", "    1", " 111 ", "    1", "1111 "],
    "4": ["1  1 ", "1  1 ", "11111", "   1 ", "   1 "],
    "5": ["11111", "1    ", "1111 ", "    1", "1111 "],
    "6": [" 111 ", "1    ", "1111 ", "1   1", " 111 "],
    "7": ["11111", "   1 ", "  1  ", " 1   ", "1    "],
    "8": [" 111 ", "1   1", " 111 ", "1   1", " 111 "],
    "9": [" 111 ", "1   1", " 1111", "    1", " 111 "],
    " ": ["     ", "     ", "     ", "     ", "     "],
    "!": ["  1  ", "  1  ", "  1  ", "     ", "  1  "]
}


# ---------------- TEXT â†’ VELOCITIES ----------------

def text_to_points(text, scale=7, spacing=2):
    points = []
    x_offset = 0

    for char in text:
        glyph = FONT[char]
        for y, row in enumerate(glyph):
            for x, c in enumerate(row):
                if c == "1":
                    points.append((x_offset + x * scale, y * scale))
        x_offset += (len(glyph[0]) + spacing) * scale

    return points


def generate_text_velocities(text, speed=0.09):
    points = text_to_points(text)

    cx = sum(p[0] for p in points) / len(points)
    cy = sum(p[1] for p in points) / len(points)

    velocities = []
    for px, py in points:
        vx = (px - cx) * speed
        vy = (py - cy) * speed
        velocities.append((vx, vy))

    return velocities
